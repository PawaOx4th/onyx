# =============================================================================
# ONYX DOCKER COMPOSE - NGINX PROXY MANAGER OVERRIDE
# =============================================================================
# Use this file when running behind Nginx Proxy Manager
# Run with: docker compose -f docker-compose.yml -f docker-compose.npm.yml up -d
# =============================================================================

services:
  # Disable the built-in nginx service
  nginx:
    profiles:
      - disabled

  # Expose web_server for Nginx Proxy Manager to connect
  web_server:
    ports:
      - "127.0.0.1:3002:3000"
    environment:
      - INTERNAL_URL=${INTERNAL_URL:-http://api_server:8080}

  # Expose api_server for NPM (optional, for direct API access)
  api_server:
    ports:
      - "127.0.0.1:8081:8080"
